# 项目主要功能说明

## 项目概述

这是一个**数字文娱IP角色塑造AI智能体平台**，提供智能体中台服务，创新"虚实共生"的数字文娱体验模式。用户可以与各种AI智能体进行对话交互，每个智能体都有独特的角色设定和个性。

---

## 核心功能模块

### 1. 用户登录系统

**功能描述：**
- 提供简洁的登录界面，支持手机号登录
- 左侧展示平台品牌信息和Logo
- 右侧为登录表单区域
- 支持自定义Logo上传功能
- 登录前需同意服务条款

**主要特性：**
- 响应式设计，支持桌面端和移动端
- 深色主题界面（#111背景色）
- 渐变背景效果（左侧面板）
- 表单验证（手机号必填、需同意条款）

---

### 2. 智能体探索页面（Explorer Page）

**功能描述：**
这是用户登录后的主页面，用于浏览和发现各种AI智能体。

**主要功能：**

#### 2.1 智能体展示
- **网格布局展示**：以卡片形式展示所有可用的智能体
- **智能体卡片信息**：
  - 智能体头像
  - 智能体名称
  - 智能体描述
  - 所属分类标签
  - 交互次数统计
- **悬停效果**：卡片支持悬停动画和视觉反馈

#### 2.2 搜索功能
- 支持按智能体名称或描述进行搜索
- 实时过滤搜索结果
- 可切换显示/隐藏搜索框

#### 2.3 分类筛选
- 自动提取所有智能体的分类
- 提供分类按钮进行筛选
- 支持"全部"分类查看所有智能体
- 动态分类标签（如：历史人物、通用、创意、效率、金融等）

#### 2.4 快速创建智能体
- **输入框快速创建**：在页面顶部提供输入框
- **AI自动生成**：根据用户输入自动生成智能体配置
  - 自动生成智能体名称
  - 自动生成智能体描述
  - 自动生成系统提示词（System Prompt）
- **即时聊天**：创建后立即进入聊天界面

#### 2.5 智能体管理
- **编辑功能**：点击卡片上的设置按钮可编辑智能体
  - 修改系统提示词
  - 上传/更换聊天背景图片
  - 保存更改
- **设置模态框**：提供友好的编辑界面

#### 2.6 用户菜单
- 用户头像下拉菜单
- 更换平台Logo功能
- 重新启动功能（重置到初始状态）

---

### 3. 聊天对话页面（Chat Page）

**功能描述：**
用户与选定智能体进行对话交互的核心页面。

**主要功能：**

#### 3.1 聊天界面布局
- **左侧聊天面板**（移动端全屏，桌面端占2/5或1/3宽度）：
  - 聊天消息列表
  - 消息输入框
  - 建议回复区域
- **右侧背景展示**（桌面端显示，移动端隐藏）：
  - 显示智能体的背景图片
  - 提供沉浸式视觉体验

#### 3.2 消息交互
- **消息类型**：
  - 用户消息：蓝色气泡，右对齐
  - AI消息：灰色气泡，左对齐，带智能体头像
- **消息显示**：
  - 支持多行文本
  - 自动滚动到最新消息
  - 实时流式显示AI回复

#### 3.3 流式响应
- **实时流式输出**：AI回复以流式方式逐字显示
- **流畅体验**：无需等待完整回复，提升交互体验
- **错误处理**：网络错误时显示友好提示

#### 3.4 建议回复
- **智能建议**：根据对话历史自动生成3个建议回复
- **快速选择**：点击建议回复按钮即可发送
- **动态更新**：每次AI回复后更新建议内容

#### 3.5 初始消息支持
- 支持从探索页面传入初始消息
- 自动发送初始消息开始对话
- 适用于快速创建智能体后的即时对话

#### 3.6 页面导航
- 返回按钮：返回智能体探索页面
- 搜索图标：预留搜索功能
- 用户图标：预留用户功能

---

### 4. 智能体系统

**功能描述：**
平台的核心，每个智能体都有独特的角色设定。

**智能体属性：**
- **id**：唯一标识符
- **name**：智能体名称（如：张仲景、AI智能体、艺术智能体等）
- **description**：智能体描述
- **category**：分类（历史人物、通用、创意、效率、金融等）
- **avatarUrl**：头像图片URL
- **imageUrl**：聊天背景图片URL
- **systemPrompt**：系统提示词，定义智能体的角色和个性
- **interactionCount**：交互次数统计（如：3.1M、2.2M等）

**预设智能体示例：**
1. **张仲景**：东汉末年名医，精通中医理论
2. **AI智能体**：通用型AI助手
3. **艺术智能体**：专注于艺术和设计的创意AI
4. **效率专家**：精通生产力技巧的AI
5. **吟游诗人**：富有创造力的故事讲述者
6. **金融顾问**：金融顾问和市场分析师

---

### 5. 页面切换动画

**功能描述：**
使用Framer Motion实现流畅的页面切换动画。

**动画特性：**
- **方向感知**：根据页面切换方向（前进/后退）应用不同的动画
- **动画效果**：
  - 透明度渐变
  - 水平位移（左右滑动）
  - 缩放效果
- **过渡配置**：
  - 缓动函数：`[0.4, 0, 0.2, 1]`
  - 持续时间：0.4秒
  - 使用AnimatePresence实现退出动画

**页面流程：**
```
登录页面 → 探索页面 → 聊天页面
```

---

### 6. 后端API服务

**功能描述：**
Python FastAPI后端，提供AI能力支持。

**主要接口：**

#### 6.1 流式聊天接口
- **路径**：`POST /api/chat/stream`
- **功能**：支持SSE（Server-Sent Events）流式输出
- **参数**：
  - messages：对话历史
  - system_prompt：系统提示词
  - model：模型选择（可选）
  - stream：是否流式输出

#### 6.2 建议回复接口
- **路径**：`POST /api/suggested-replies`
- **功能**：根据对话历史生成建议回复
- **返回**：3个建议回复的数组

#### 6.3 智能体配置生成接口
- **路径**：`POST /api/agent-profile`
- **功能**：根据用户输入自动生成智能体配置
- **返回**：包含name、description、systemPrompt的JSON

#### 6.4 健康检查接口
- **路径**：`GET /api/health`
- **功能**：检查服务状态和API Key配置

**技术特点：**
- 支持ChatGLM API（智谱AI）
- CORS跨域支持
- 流式响应处理
- 错误处理和降级方案

---

## 技术特性

### 前端技术栈
- **React 19.2.0**：UI框架
- **TypeScript**：类型安全
- **Vite 6.2.0**：构建工具
- **Framer Motion 12.23.24**：动画库
- **Tailwind CSS**：样式框架（通过CDN）
- **Google GenAI SDK**：Gemini API支持（可选）

### 后端技术栈
- **FastAPI**：Python Web框架
- **ChatGLM API**：智谱AI大模型
- **Uvicorn**：ASGI服务器
- **Python-dotenv**：环境变量管理

### UI/UX特性
- **响应式设计**：适配桌面端和移动端
- **深色主题**：统一的深色界面风格
- **流畅动画**：页面切换和交互动画
- **实时反馈**：流式消息显示
- **友好提示**：加载状态和错误提示

---

## 数据流

### 状态管理
- **App.tsx**：全局状态管理
  - 当前页面状态
  - 智能体列表
  - 活动聊天状态
  - Logo URL状态

### 数据传递
- **Props传递**：组件间通过Props传递数据
- **回调函数**：通过回调函数实现数据更新
- **Ref引用**：使用Ref管理DOM引用和会话状态

---

## 用户体验亮点

1. **一键创建智能体**：输入需求即可快速创建专属智能体
2. **流式对话体验**：实时显示AI回复，无需等待
3. **智能建议回复**：自动生成相关回复建议，提升交互效率
4. **个性化定制**：支持自定义Logo和智能体背景
5. **流畅动画**：页面切换和交互都有流畅的动画效果
6. **响应式设计**：完美适配各种设备尺寸

---

## 使用场景

1. **数字文娱IP角色塑造**：为IP角色创建专属AI智能体
2. **个性化AI助手**：快速创建符合个人需求的AI助手
3. **多角色对话体验**：与不同角色设定的AI进行对话
4. **创意内容生成**：利用AI智能体进行创意内容创作
5. **专业领域咨询**：通过专业智能体获取领域知识

---

## 未来扩展方向

- 用户账户系统
- 对话历史保存
- 智能体分享功能
- 更多AI模型支持
- 语音交互功能
- 多语言支持

